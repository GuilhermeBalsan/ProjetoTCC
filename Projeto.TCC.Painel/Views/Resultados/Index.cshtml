@model IEnumerable<Projeto.TCC.Painel.Models.Resultado>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_LayoutAdm.cshtml";
}

<div class="row">
    <div class="col-md-12 form-inline">
        <form method="post" action="@Url.Action("Filtro", "Resultados")">
            <div class="form-group">
                <label class="sr-only" for="titulo">Titulo</label>
                <input type="text" class="form-control" id="nome" name="nome" placeholder="Nome">
            </div>
            <div class="form-group">
                @Html.DropDownList("questionarioId", (IEnumerable<SelectListItem>)ViewBag.Questionarios, "Todos", new { @class = "form-control" })
            </div>
            <input type="submit" value="Filtro" class="btn btn-default" style="margin-bottom: 10px" id="filtro" />            
        </form>
    </div>
</div>

<br />

<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Nome)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Email)
        </th>
        <th>
            Questionário
        </th>
        <th>
            Resultado
        </th>

    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Nome)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Email)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Questionario.Nome)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Atributo.Titulo)
            </td>
        </tr>
    }

</table>

@*<script>
    $(function () {
        $('#filtro').on('click', function () {
            $.ajax({
                url: "/Resultados/Filtro",
                type: 'POST',
                contentType: "application/json; charset=utf-8",
                dataType: 'json',
                data: JSON.stringify({
                    nome: $("#nome").val(),
                    questionarioId: $("#questionarioId").val()
                }),
                async: false
            });
        });
    });

    //$(document).ready(function () {
    //    alert("ok");
    //});

</script>*@